#!/usr/bin/env node
var fs = require('fs');
var provider = require('../lib/providers/csv');
var GeoJSONStream = require('geojson-stream');
var stream = fs.createReadStream('../data/poi/usa/usacampgrounds.info/MidwestCamp.csv');
var options = {
  csv: {
    "delimiter": ",",
    "columns": [
      "lon", 
      "lat", 
      "gps_composite_field",
      "campground_code",
      "campground_name",
      "type",
      "phone",
      "dates_open",
      "comments",
      "number_of_campsites",
      "elevation",
      "amenities",
      "state",
      "distance",
      "heading",
      "nearest_city"
    ],
    "auto-parse": true
  },
  geoJSON: {
    Point: ['lat', 'lon'] 
  }
};

provider
  .retrieve(stream, options)
  .pipe(GeoJSONStream.stringify())
  .pipe(process.stdout);
